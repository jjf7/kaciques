_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[8],{j49Z:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/categories",function(){return r("mAMT")}])},mAMT:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return I}));var n=r("o0o1"),a=r.n(n),c=r("nKUr"),o=r("HaE+"),s=r("q1tI"),i=r.n(s),l=r("YFqc"),u=r.n(l),d=r("5Yp1"),b=r("KQm4"),j=r("rePB"),p=r("ODXe"),O=r("h4VS"),h=r("vOnD"),f=r("d76Q"),x=r.n(f),g=r("zM5D"),m=r("cWnB"),y=r("QojX"),v=r("3Z9Z"),w=r("JI6e"),k=r("jDKy"),C=r("20a2"),N=r("5qq8");function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){Object(j.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(){var e=Object(O.a)(["\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px;\n        columns={columns}\n  height: 34px;\n  width: 32px;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return T=function(){return e},e}function D(){var e=Object(O.a)(["\n  height: 32px;\n  width: 200px;\n  border-radius: 3px;\n  border-top-left-radius: 5px;\n  border-bottom-left-radius: 5px;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  border: 1px solid #e5e5e5;\n  padding: 0 32px 0 16px;\n\n  &:hover {\n    cursor: pointer;\n  }\n"]);return D=function(){return e},e}var _=h.default.input(D()),E=Object(h.default)(m.a)(T()),F=function(e){var t=e.filterText,r=e.onFilter,n=e.onClear;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(_,{id:"search",type:"text",placeholder:"Introduzca el nombre del producto a buscar","aria-label":"Search Input",value:t,onChange:r}),Object(c.jsx)(E,{type:"button",onClick:n,children:"X"})]})},J=function(e){var t=e.columns,r=e.data,n=e.setMsg,l=Object(C.useRouter)(),u=Object(s.useState)(!1),d=u[0],j=u[1],O=i.a.useState(""),h=Object(p.a)(O,2),f=h[0],P=h[1],T=Object(s.useState)(!1),D=T[0],_=T[1],E={id:"",title:""},J=Object(s.useState)(E),H=J[0],M=J[1],B=function(){return j(!1)},I=i.a.useState(!1),q=Object(p.a)(I,2),z=q[0],L=q[1],R=r.filter((function(e){return e.title&&e.title.toLowerCase().includes(f.toLowerCase())})),X=i.a.useMemo((function(){return Object(c.jsx)(F,{onFilter:function(e){return P(e.target.value)},onClear:function(){f&&(L(!z),P(""))},filterText:f})}),[f,z]),V=function(e){M(S(S({},H),{},{id:e._id,title:e.title})),j(!0)},Z=function(){var e=Object(o.a)(a.a.mark((function e(t){var r,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=JSON.parse(Object(N.a)(l)),!1!==t.currentTarget.checkValidity()){e.next=7;break}t.preventDefault(),t.stopPropagation(),e.next=15;break;case 7:return _(!0),e.next=10,fetch("http://localhost:3001/categories/".concat(H.id),{method:"PUT",headers:{"Content-Type":"application/json","x-access-token":r.token},body:JSON.stringify({title:H.title})});case 10:return c=e.sent,e.next=13,c.json();case 13:"success"==(o=e.sent)?(n({status:1,msg:"Se ha editado correctamente la categoria"}),j(!1),M(E)):n({status:2,msg:o});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=t.map((function(e){return e})),G=Object(s.useCallback)((function(){return[].concat(Object(b.a)(A),[{name:"Acciones",allowOverflow:!0,right:!0,minWidth:"200px",cell:function(e){return Object(c.jsx)("div",{children:Object(c.jsx)("button",{className:"btn btn-warning btn-sm",type:"button",onClick:function(){return V(e)},style:{backgroundColor:"aliceblue"},children:Object(c.jsx)("i",{className:"fi-rr-edit"})})})}}])}),[A]);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(x.a,{columns:G(),data:R,defaultSortField:"title",pagination:!0,paginationPerPage:5,paginationResetDefaultPage:z,subHeader:!0,subHeaderComponent:X,persistTableHead:!0}),Object(c.jsxs)(g.a,{size:"lg",show:d,onHide:B,children:[Object(c.jsx)(g.a.Header,{closeButton:!0,children:Object(c.jsx)(g.a.Title,{children:"Editar categor\xeda"})}),Object(c.jsx)(g.a.Body,{children:Object(c.jsx)(y.a,{validated:D,children:Object(c.jsxs)(y.a.Group,{as:v.a,style:{marginTop:"30px"},children:[Object(c.jsx)(y.a.Label,{column:!0,sm:3,children:"Nombre Categor\xeda"}),Object(c.jsxs)(w.a,{sm:9,children:[Object(c.jsx)(k.a,{onChange:function(e){M(S(S({},H),{},{title:e.target.value}))},name:"title",id:"title",required:!0,value:H.title,type:"text",placeholder:"Nombre"}),Object(c.jsx)(y.a.Control.Feedback,{children:"Correcto!"}),Object(c.jsx)(y.a.Control.Feedback,{type:"invalid",children:"Introduzca el nombre de la categor&iacuta;a"})]})]})})}),Object(c.jsxs)(g.a.Footer,{children:[Object(c.jsx)(m.a,{variant:"secondary",onClick:B,children:"Cerrar"}),Object(c.jsx)(m.a,{variant:"primary",onClick:Z,children:"Editar categor\xeda"})]})]})]})};function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){Object(j.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e){var t=e.setMsg,r=Object(C.useRouter)(),n=Object(s.useState)(!1),i=n[0],l=n[1],u=Object(s.useState)(!1),d=u[0],b=u[1],j={title:""},p=Object(s.useState)(j),O=p[0],h=p[1],f=function(){var e=Object(o.a)(a.a.mark((function e(n){var c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=JSON.parse(Object(N.a)(r)),!1!==n.currentTarget.checkValidity()){e.next=7;break}n.preventDefault(),n.stopPropagation(),e.next=15;break;case 7:return b(!0),e.next=10,fetch("http://localhost:3001/categories",{method:"POST",headers:{"Content-Type":"application/json","x-access-token":c.token},body:JSON.stringify(O)});case 10:return o=e.sent,e.next=13,o.json();case 13:"success"==e.sent?(t({status:1,msg:"Se ha agregado correctamente la nueva categoria"}),l(!1),h(j)):t({status:2,msg:"Rellene el formulario"});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){return l(!1)};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(m.a,{variant:"info",onClick:function(){return l(!0)},children:"Nueva Categor\xeda"}),Object(c.jsxs)(g.a,{size:"lg",show:i,onHide:x,children:[Object(c.jsx)(g.a.Header,{closeButton:!0,children:Object(c.jsx)(g.a.Title,{children:"Nueva Categor\xeda"})}),Object(c.jsx)(g.a.Body,{children:Object(c.jsx)(y.a,{noValidate:!0,validated:d,children:Object(c.jsxs)(y.a.Group,{as:v.a,style:{marginTop:"30px"},children:[Object(c.jsx)(y.a.Label,{column:!0,sm:3,children:"Nombre"}),Object(c.jsxs)(w.a,{sm:9,children:[Object(c.jsx)(k.a,{onChange:function(e){h(M(M({},O),{},{title:e.target.value}))},name:"title",id:"title",required:!0,type:"text",placeholder:"Nombre de la categoria"}),Object(c.jsx)(y.a.Control.Feedback,{children:"Correcto!"}),Object(c.jsx)(y.a.Control.Feedback,{type:"invalid",children:"Introduzca el nombre de la categoria"})]})]})})}),Object(c.jsxs)(g.a.Footer,{children:[Object(c.jsx)(m.a,{variant:"secondary",onClick:x,children:"Cerrar"}),Object(c.jsx)(m.a,{variant:"primary",onClick:f,children:"Guardar categor\xeda"})]})]})]})}function I(){var e=Object(C.useRouter)(),t=Object(s.useState)(""),r=t[0],n=t[1],i=Object(s.useState)([]),l=i[0],b=i[1];function j(){return(j=Object(o.a)(a.a.mark((function t(){var r,n,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=JSON.parse(Object(N.a)(e)),t.next=3,fetch("http://localhost:3001/categories",{headers:{"Content-Type":"application/json","x-access-token":r.token}});case 3:return n=t.sent,t.next=6,n.json();case 6:c=t.sent,b(c);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(s.useEffect)((function(){"user"===JSON.parse(Object(N.a)(e)).role&&e.push("/dashboard"),function(){j.apply(this,arguments)}()}),[r]);return Object(c.jsxs)(d.a,{children:[Object(c.jsx)("h4",{className:"title-h1",children:"Listado de Categor\xedas"}),r?1==r.status?Object(c.jsxs)("div",{className:"alert alert-success",role:"alert",children:[Object(c.jsx)("i",{className:"fi-rr-check"}),r.msg]}):Object(c.jsx)("div",{className:"alert alert-danger",role:"alert",children:r.msg}):"",Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("div",{className:"containerButtons",children:[Object(c.jsx)(B,{setMsg:n}),Object(c.jsx)(u.a,{href:"/products",children:Object(c.jsx)("a",{className:"btn btn-primary btn-small",children:"Listado de Productos"})})]}),Object(c.jsx)(J,{setMsg:n,className:"mt-5",columns:[{name:"Id",selector:"_id",omit:!0},{name:"Categoria",selector:"title",sortable:!0,editable:!0}],data:l})]})]})}}},[["j49Z",0,2,1,3,4]]]);