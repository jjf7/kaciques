{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Owner/Desktop/kaciques/front/node_modules/@babel/runtime/regenerator\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _asyncToGenerator from \"C:/Users/Owner/Desktop/kaciques/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useState, useEffect } from \"react\";\nimport Layout from \"../components/Layout\";\nimport Form from \"react-bootstrap/Form\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport { formatMoney } from \"../utils/format\";\nimport { useRouter } from \"next/router\";\nimport { checkLocal } from \"../utils/local\";\nexport default function index() {\n  var router = useRouter();\n\n  var _useState = useState([]),\n      products = _useState[0],\n      setProducts = _useState[1];\n\n  var _useState2 = useState([]),\n      dolar = _useState2[0],\n      setDolar = _useState2[1];\n\n  var _useState3 = useState([]),\n      moneda = _useState3[0],\n      setMoneda = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      id = _useState4[0],\n      setId = _useState4[1];\n\n  var _useState5 = useState(\"Escanea el producto\"),\n      message = _useState5[0],\n      setMessage = _useState5[1];\n\n  var _useState6 = useState(\"\"),\n      title = _useState6[0],\n      setTitle = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      price = _useState7[0],\n      setPrice = _useState7[1];\n\n  React.useEffect(function () {\n    getProducts();\n  }, []);\n\n  function getProducts() {\n    return _getProducts.apply(this, arguments);\n  }\n\n  function _getProducts() {\n    _getProducts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var u, res, data, resS, dataS;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              u = JSON.parse(checkLocal(router));\n              _context.next = 3;\n              return fetch(\"http://localhost:3001/products\", {\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  \"x-access-token\": u.token\n                }\n              });\n\n            case 3:\n              res = _context.sent;\n              _context.next = 6;\n              return res.json();\n\n            case 6:\n              data = _context.sent;\n              _context.next = 9;\n              return fetch(\"http://localhost:3001/settings\", {\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  \"x-access-token\": u.token\n                }\n              });\n\n            case 9:\n              resS = _context.sent;\n              _context.next = 12;\n              return resS.json();\n\n            case 12:\n              dataS = _context.sent;\n              setProducts(data);\n              setDolar(dataS[0].dolar);\n              setMoneda(dataS[0].moneda);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _getProducts.apply(this, arguments);\n  }\n\n  function search(_x) {\n    return _search.apply(this, arguments);\n  }\n\n  function _search() {\n    _search = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              console.log('products', products);\n              _context2.next = 4;\n              return products.find(function (i) {\n                return i.codebar === id;\n              });\n\n            case 4:\n              result = _context2.sent;\n\n              if (result) {\n                setMessage(\"Encontrado!\");\n                e.target.select();\n                setTitle(result.title);\n                setPrice(formatMoney(result.price * dolar));\n              } else {\n                e.target.select();\n                setMessage(id === \"\" ? \"Escanea el producto\" : \"No existe\");\n              }\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _search.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsxs(Layout, {\n      children: [/*#__PURE__*/_jsx(\"h4\", {\n        className: \"title-h1\",\n        children: \"Lector de Precios\"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"container\",\n        style: {\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          height: \"50vh\"\n        },\n        children: /*#__PURE__*/_jsx(\"div\", {\n          style: {\n            width: \"70%\"\n          },\n          children: /*#__PURE__*/_jsx(\"div\", {\n            style: {\n              textAlign: \"center\"\n            },\n            children: /*#__PURE__*/_jsx(Form.Group, {\n              as: Row,\n              children: /*#__PURE__*/_jsxs(Col, {\n                sm: 12,\n                children: [/*#__PURE__*/_jsx(Form.Control, {\n                  type: \"text\",\n                  name: \"id\",\n                  value: id,\n                  onChange: function onChange(e) {\n                    return setId(e.target.value);\n                  },\n                  onKeyUp: search,\n                  autoComplete: \"off\",\n                  autoFocus: \"on\",\n                  placeholder: \"C\\xF3digo\"\n                }), /*#__PURE__*/_jsx(\"code\", {\n                  className: message === \"Escanea el producto\" ? null : message === \"No existe\" ? \"rojo\" : \"verde\",\n                  children: message === \"Encontrado!\" ? \"\" : message\n                }), message === \"Encontrado!\" ? /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"mt-4 find\",\n                  children: [/*#__PURE__*/_jsx(\"h1\", {\n                    className: \"titleProduct\",\n                    children: title\n                  }), /*#__PURE__*/_jsxs(\"h2\", {\n                    className: \"mt-4 priceProduct\",\n                    children: [\" \", \"Precio: \", /*#__PURE__*/_jsx(\"b\", {\n                      children: price\n                    }), \" \", /*#__PURE__*/_jsx(\"span\", {\n                      children: moneda\n                    })]\n                  })]\n                }) : \"\"]\n              })\n            })\n          })\n        })\n      })]\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}