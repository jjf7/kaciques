{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"C:/Users/Owner/Desktop/kaciques/front/node_modules/@babel/runtime/regenerator\";\nimport _slicedToArray from \"C:/Users/Owner/Desktop/kaciques/front/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"C:/Users/Owner/Desktop/kaciques/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { useState, useEffect } from \"react\";\nimport Layout from \"../components/Layout\";\nimport Form from \"react-bootstrap/Form\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport { formatMoney } from \"../utils/format\";\nimport { useRouter } from \"next/router\";\nimport { checkLocal } from \"../utils/local\";\nexport default function index() {\n  var router = useRouter();\n\n  var _useState = useState([]),\n      products = _useState[0],\n      setProducts = _useState[1];\n\n  var _useState2 = useState([]),\n      dolar = _useState2[0],\n      setDolar = _useState2[1];\n\n  var _useState3 = useState([]),\n      moneda = _useState3[0],\n      setMoneda = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      id = _useState4[0],\n      setId = _useState4[1];\n\n  var _useState5 = useState(\"Escanea el producto\"),\n      message = _useState5[0],\n      setMessage = _useState5[1];\n\n  var _useState6 = useState(\"\"),\n      title = _useState6[0],\n      setTitle = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      price = _useState7[0],\n      setPrice = _useState7[1];\n\n  useEffect(function () {\n    var u = JSON.parse(checkLocal(router));\n    Promise.all([fetch(\"http://localhost:3001/products\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-access-token\": u.token\n      }\n    }), fetch(\"http://localhost:3001/settings\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"x-access-token\": u.token\n      }\n    })]).then( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n        var _ref3, res, res2, a, b;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _ref3 = _slicedToArray(_ref, 2), res = _ref3[0], res2 = _ref3[1];\n                _context.next = 3;\n                return res.json();\n\n              case 3:\n                a = _context.sent;\n                _context.next = 6;\n                return res2.json();\n\n              case 6:\n                b = _context.sent;\n                return _context.abrupt(\"return\", [a, b]);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }()).then(function (_ref4) {\n      var _ref5 = _slicedToArray(_ref4, 2),\n          a = _ref5[0],\n          b = _ref5[1];\n\n      setProducts(a);\n      setDolar(b[0].dolar);\n      setMoneda(b[0].moneda);\n    })[\"catch\"](function (e) {\n      return console.log(e);\n    });\n  }, []);\n\n  function search(_x2) {\n    return _search.apply(this, arguments);\n  }\n\n  function _search() {\n    _search = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              _context2.next = 3;\n              return products.find(function (i) {\n                return i.codebar === id;\n              });\n\n            case 3:\n              result = _context2.sent;\n\n              if (result) {\n                setMessage(\"Encontrado!\");\n                e.target.select();\n                setTitle(result.title);\n                setPrice(formatMoney(result.price * dolar));\n              } else {\n                setMessage(id === \"\" ? \"Escanea el producto\" : \"No existe\");\n              }\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _search.apply(this, arguments);\n  }\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsxs(Layout, {\n      children: [/*#__PURE__*/_jsx(\"h4\", {\n        className: \"title-h1\",\n        children: \"Verificador de Precios\"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"container\",\n        style: {\n          display: \"flex\",\n          justifyContent: \"center\",\n          height: \"50vh\"\n        },\n        children: /*#__PURE__*/_jsx(\"div\", {\n          style: {\n            width: \"70%\"\n          },\n          children: /*#__PURE__*/_jsx(\"div\", {\n            style: {\n              textAlign: \"center\"\n            },\n            children: products.length > 0 ? /*#__PURE__*/_jsxs(\"div\", {\n              className: \"mt-5\",\n              children: [/*#__PURE__*/_jsx(Form.Group, {\n                as: Row,\n                children: /*#__PURE__*/_jsxs(Col, {\n                  sm: 12,\n                  children: [/*#__PURE__*/_jsx(Form.Control, {\n                    type: \"text\",\n                    name: \"id\",\n                    value: id,\n                    onChange: function onChange(e) {\n                      return setId(e.target.value);\n                    },\n                    onKeyUp: search,\n                    autoComplete: \"off\",\n                    autoFocus: \"on\",\n                    placeholder: \"C\\xF3digo\"\n                  }), /*#__PURE__*/_jsx(\"code\", {\n                    className: message === \"Escanea el producto\" ? null : message === \"No existe\" ? \"rojo\" : \"verde\",\n                    children: message === \"Encontrado!\" ? \"\" : message\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(Row, {\n                children: /*#__PURE__*/_jsx(Col, {\n                  children: message === \"Encontrado!\" ? /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"find\",\n                    children: [/*#__PURE__*/_jsx(\"h1\", {\n                      className: \"titleProduct\",\n                      children: title\n                    }), /*#__PURE__*/_jsxs(\"h2\", {\n                      className: \"priceProduct\",\n                      children: [\" \", \"Precio: \", /*#__PURE__*/_jsx(\"b\", {\n                        children: price\n                      }), \" \", /*#__PURE__*/_jsx(\"span\", {\n                        children: moneda\n                      })]\n                    })]\n                  }) : \"\"\n                })\n              })]\n            }) : /*#__PURE__*/_jsx(\"span\", {\n              className: \"find\",\n              children: \"Espere por favor...\"\n            })\n          })\n        })\n      })]\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}