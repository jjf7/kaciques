{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"C:/Users/Owner/Desktop/kaciques/front/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/Owner/Desktop/kaciques/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/router\";\nimport Header from \"../components/Header\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport FormControl from \"react-bootstrap/FormControl\";\nimport { setLocal } from '../utils/local';\nimport Head from \"next/head\";\nexport default function index() {\n  var router = useRouter();\n\n  var _useState = useState(\"\"),\n      msg = _useState[0],\n      setMsg = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      password = _useState3[0],\n      setPassword = _useState3[1];\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var result, user;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.next = 3;\n              return fetch(\"http://localhost:3001/signin\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  email: email,\n                  password: password\n                })\n              });\n\n            case 3:\n              result = _context.sent;\n              _context.next = 6;\n              return result.json();\n\n            case 6:\n              user = _context.sent;\n\n              if (user.token) {\n                setMsg({\n                  status: 1,\n                  msg: \"Bienvenid@: \".concat(user.username, \",  en breve seras redireccionado...\")\n                }); //console.log(user)\n\n                setLocal(JSON.stringify(user));\n                setTimeout(function () {\n                  router.push(\"/dashboard\");\n                }, 5000);\n              } else {\n                setMsg({\n                  status: 2,\n                  msg: user\n                });\n              }\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsx(\"meta\", {\n        name: \"viewport\",\n        content: \"initial-scale=1.0, width=device-width\"\n      }), /*#__PURE__*/_jsx(\"link\", {\n        rel: \"stylesheet\",\n        href: \"https://cdn-uicons.flaticon.com/uicons-regular-rounded/css/uicons-regular-rounded.css\"\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"containerCustom\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"main\",\n        children: [/*#__PURE__*/_jsxs(\"h4\", {\n          className: \"title-h1 bg-light\",\n          children: [\"SISTEMA DE LECTOR DE PRECIOS(SISLECPRE) \", /*#__PURE__*/_jsx(\"small\", {\n            children: \"Ver 1.0\"\n          })]\n        }), /*#__PURE__*/_jsx(\"h5\", {\n          children: \"Login\"\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"container\",\n          children: [msg ? msg.status == 1 ? /*#__PURE__*/_jsxs(\"div\", {\n            className: \"alert alert-success\",\n            role: \"alert\",\n            children: [/*#__PURE__*/_jsx(\"i\", {\n              className: \"fi-rr-check\"\n            }), msg.msg]\n          }) : /*#__PURE__*/_jsx(\"div\", {\n            className: \"alert alert-danger\",\n            role: \"alert\",\n            children: msg.msg\n          }) : \"\", /*#__PURE__*/_jsx(\"div\", {\n            className: \"row\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"offset-md-3 col-md-5 col-xs-12\",\n              children: [/*#__PURE__*/_jsxs(Form, {\n                noValidate: true,\n                className: \"bg-light p-3\",\n                children: [/*#__PURE__*/_jsxs(Form.Group, {\n                  as: Row,\n                  style: {\n                    marginTop: \"30px\"\n                  },\n                  children: [/*#__PURE__*/_jsx(Form.Label, {\n                    column: true,\n                    sm: 3,\n                    children: \"Email\"\n                  }), /*#__PURE__*/_jsxs(Col, {\n                    sm: 9,\n                    children: [/*#__PURE__*/_jsx(FormControl, {\n                      onChange: function onChange(e) {\n                        setEmail(e.target.value);\n                      },\n                      name: \"email\",\n                      id: \"email\",\n                      required: true,\n                      type: \"email\",\n                      placeholder: \"Email\",\n                      autoFocus: true\n                    }), /*#__PURE__*/_jsx(Form.Control.Feedback, {\n                      children: \"Correcto!\"\n                    }), /*#__PURE__*/_jsx(Form.Control.Feedback, {\n                      type: \"invalid\",\n                      children: \"Introduzca el email\"\n                    })]\n                  })]\n                }), /*#__PURE__*/_jsxs(Form.Group, {\n                  as: Row,\n                  style: {\n                    marginTop: \"30px\"\n                  },\n                  children: [/*#__PURE__*/_jsx(Form.Label, {\n                    column: true,\n                    sm: 3,\n                    children: \"Contrase\\xF1a\"\n                  }), /*#__PURE__*/_jsxs(Col, {\n                    sm: 9,\n                    children: [/*#__PURE__*/_jsx(FormControl, {\n                      onChange: function onChange(e) {\n                        setPassword(e.target.value);\n                      },\n                      name: \"password\",\n                      id: \"password\",\n                      required: true,\n                      type: \"password\",\n                      placeholder: \"Password\"\n                    }), /*#__PURE__*/_jsx(Form.Control.Feedback, {\n                      children: \"Correcto!\"\n                    }), /*#__PURE__*/_jsx(Form.Control.Feedback, {\n                      type: \"invalid\",\n                      children: \"Introduzca la contrasena\"\n                    })]\n                  })]\n                })]\n              }), /*#__PURE__*/_jsx(Button, {\n                variant: \"primary mt-5\",\n                onClick: handleSubmit,\n                children: \"Iniciar sesi\\xF3n\"\n              })]\n            })\n          })]\n        })]\n      })\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}