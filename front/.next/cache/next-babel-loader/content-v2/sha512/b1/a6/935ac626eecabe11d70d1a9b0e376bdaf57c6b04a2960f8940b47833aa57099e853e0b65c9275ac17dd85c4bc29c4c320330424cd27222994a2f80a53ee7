{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useState, useEffect } from \"react\";\nimport Layout from \"../components/Layout\";\nimport Form from \"react-bootstrap/Form\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport { formatMoney } from \"../utils/format\";\nimport { useRouter } from \"next/router\";\nimport { checkLocal } from \"../utils/local\";\nexport default function index() {\n  const router = useRouter();\n  const {\n    0: products,\n    1: setProducts\n  } = useState([]);\n  const {\n    0: dolar,\n    1: setDolar\n  } = useState([]);\n  const {\n    0: moneda,\n    1: setMoneda\n  } = useState([]);\n  const {\n    0: id,\n    1: setId\n  } = useState(\"\");\n  const {\n    0: message,\n    1: setMessage\n  } = useState(\"Escanea el producto\");\n  const {\n    0: title,\n    1: setTitle\n  } = useState(\"\");\n  const {\n    0: price,\n    1: setPrice\n  } = useState(\"\");\n  useEffect(async () => {\n    await getProducts();\n    console.log(\"upload 1 time\");\n    console.log(products);\n  }, []);\n\n  const getProducts = async () => {\n    try {\n      const u = JSON.parse(checkLocal(router));\n      const dataProducts = await (await fetch(\"http://localhost:3001/products\", {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-access-token\": u.token\n        }\n      })).json();\n      const dataSettings = await (await fetch(\"http://localhost:3001/settings\", {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-access-token\": u.token\n        }\n      })).json();\n      setProducts(dataProducts);\n      setDolar(dataSettings[0].dolar);\n      setMoneda(dataSettings[0].moneda);\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n\n  async function search(e) {\n    e.preventDefault();\n    const result = await products.find(i => i.codebar === id);\n\n    if (result) {\n      setMessage(\"Encontrado!\");\n      e.target.select();\n      setTitle(result.title);\n      setPrice(formatMoney(result.price * dolar));\n    } else {\n      setMessage(id === \"\" ? \"Escanea el producto\" : \"No existe\");\n    }\n  }\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsxs(Layout, {\n      children: [/*#__PURE__*/_jsx(\"h4\", {\n        className: \"title-h1\",\n        children: \"Lector de Precios\"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"container\",\n        style: {\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          height: \"50vh\"\n        },\n        children: /*#__PURE__*/_jsx(\"div\", {\n          style: {\n            width: \"70%\"\n          },\n          children: /*#__PURE__*/_jsx(\"div\", {\n            style: {\n              textAlign: \"center\"\n            },\n            children: products.length > 0 ? /*#__PURE__*/_jsx(Form.Group, {\n              as: Row,\n              children: /*#__PURE__*/_jsxs(Col, {\n                sm: 12,\n                children: [/*#__PURE__*/_jsx(Form.Control, {\n                  type: \"text\",\n                  name: \"id\",\n                  value: id,\n                  onChange: e => setId(e.target.value),\n                  onKeyUp: search,\n                  autoComplete: \"off\",\n                  autoFocus: \"on\",\n                  placeholder: \"C\\xF3digo\"\n                }), /*#__PURE__*/_jsx(\"code\", {\n                  className: message === \"Escanea el producto\" ? null : message === \"No existe\" ? \"rojo\" : \"verde\",\n                  children: message === \"Encontrado!\" ? \"\" : message\n                }), message === \"Encontrado!\" ? /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"mt-4 find\",\n                  children: [/*#__PURE__*/_jsx(\"h1\", {\n                    className: \"titleProduct\",\n                    children: title\n                  }), /*#__PURE__*/_jsxs(\"h2\", {\n                    className: \"mt-4 priceProduct\",\n                    children: [\" \", \"Precio: \", /*#__PURE__*/_jsx(\"b\", {\n                      children: price\n                    }), \" \", /*#__PURE__*/_jsx(\"span\", {\n                      children: moneda\n                    })]\n                  })]\n                }) : \"\"]\n              })\n            }) : /*#__PURE__*/_jsx(\"span\", {\n              className: \"find\",\n              children: \"Espere por favor...\"\n            })\n          })\n        })\n      })]\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}